# 面向对象思想

## 概述

随着计算机技术的发展，我们想用计算机来解决越来越复杂的问题。问题越复杂，解决问题需要的抽象层往往越高。

编程语言的的发展，也顺应着这样的趋势一开始的汇编语言只是对计算机硬件的简单抽象，C语言又对其进行了进一步的抽象，使其更加贴近问题而不是硬件；到了 Java，面向对象编程(OOP)的思想已近很成熟了，这是一种更加抽象的语言，对计算机硬件的表达更少，而对问题的描述更多。

## 认识面向对象

* 什么是*对象*？

对象就是一个存在的东西！

在面向过程的编程中，我们需要把一个问题转换成一系列的数据和操作数据的算法，同时我们还需要考虑这些数据和算法如何用计算机可以理解的方式表达出来，即遵照基础机器的表达方式。

对象的概念可为我们带来极大的便利。它在概念上允许我们将各式各样数据和功能封装到一起。这样便可恰当表达“问题空间”的概念，不用刻意遵照基础机器的表达方式。

* 什么是*面向对象的程序设计*？

面向对象编程，就是把一切问题的部分抽象成对象，用那些通用的特征和行为来描述他们，然后再处理这些对象之间的沟通，得到完整的问题描述，并通过给这些对象一些，信息让他们最终给出一个解。

* “纯粹”的面向对象程序设计方法是什么样的？

    1. 所有东西都是对象。可将对象想象成一种新型变量；它保存着数据，但可要求它对自身进行操作。理论上讲，可从要解决的问题身上提出所有概念性的组件，然后在程序中将其表达为一个对象。
    2. 程序是一大堆对象的组合；通过消息传递，各对象知道自己该做些什么。为了向对象发出请求，需向那个对象“发送一条消息”。更具体地讲，可将消息想象为一个调用请求，它调用的是从属于目标对象的一个子例程或函数。
    3.  每个对象都有自己的存储空间，可容纳其他对象。或者说，通过封装现有对象，可制作出新型对象。所以，尽管对象的概念非常简单，但在程序中却可达到任意高的复杂程度。
    4. 每个对象都有一种类型。根据语法，每个对象都是某个“类”的一个“实例”。其中，“类”（Class）是“类型”（Type）的同义词。一个类最重要的特征就是“能将什么消息发给它？”。
    5. 同一类所有对象都能接收相同的消息。这实际是别有含义的一种说法，大家不久便能理解。由于类型为“圆”（Circle）的一个对象也属于类型为“形状”（Shape）的一个对象，所以一个圆完全能接收形状消息。这意味着可让程序代码统一指挥“形状”，令其自动控制所有符合“形状”描述的对象，其中自然包括“圆”。这一特性称为对象的“可替换性”，是OOP最重要的概念之一。


## 对象的接口

所有对象，尽管各有特色，都属于某一系列对象的一部分，这些对象具有通用的特征和行为。

“接口”（Interface）就是把一种类型的对象的共同特征抽象出来，并将其表示。（大多数语言中我们使用关键字 `class` 来描述）

“类型”决定了接口，而“类”是那个接口的一种特殊实现方式。

接口建立的同时，也规定了可对一个特定的对象发出哪些请求。所以建好一个类后，可根据情况生成许多对象。随后，可将那些对象作为要解决问题中存在的元素进行处理。

## 实现方案的隐藏

在面向对象的程序设计的过程中，我们时常需要*控制对成员的访问*。

一方面，防止调用类的程序员接触到内部数据类型的设计思想。若只是为了解决特定的问题，用户只需操作接口即可，毋需明白这些信息。我们向用户提供的实际是一种服务，因为他们很容易就可看出哪些对自己非常重要，以及哪些可忽略不计。  

另一方面，允许库设计人员修改内部结构，不用担心它会对客户程序员造成什么影响。例如，我们最开始可能设计了一个形式简单的类，以便简化开发。以后又决定进行改写，使其更快地运行。若接口与实现方法早已隔离开，并分别受到保护，就可放心做到这一点，只要求用户重新链接一下即可。

在我们的接口中，要实现这样的访问控制，把一部分设计细节隐藏起来，便需要一种机制来实现对访问的控制，在 Java 中这种控制用关键字 `public`，`private`，`protected` 以及暗示性的 `friendly`来实现：

* “public”（公共）意味着后续的定义任何人均可使用。
* “private”（私有）意味着除您自己、类型的创建者以及那个类型的内部函数成员，其他任何人都不能访问后续的定义信息。
* “protected”（受保护的）与“private”相似，只是一个继承的类可访问受保护的成员，但不能访问私有成员。继承的问题不久就要谈到。
* “friendly”（友好的）涉及“包装”或“封装”（Package）的概念——即Java用来构建库的方法。若某样东西是“友好的”，意味着它只能在这个包装的范围内使用（所以这一访问级别有时也叫作“包装访问”）。

## 方案的重复使用

创建并测试好一个类后，它应（从理想的角度）代表一类事物，是可以重复在很多地方使用的。

为重复使用一个类，最简单的办法是仅直接使用那个类的对象。同时也能将那个类的一个对象置入一个新类，这种类中置入类的方法成为“组织”或“包含”，比如“一辆车包含了一个变速箱”。

## 继承：重新使用接口

我们费尽心思做出一种数据类型后，假如不得不又新建一种类型，令其实现大致相同的功能，那会是一件非常令人灰心的事情。
但若能利用现成的数据类型，对其进行“克隆”，再根据情况进行添加和修改，情况就显得理想多了。“继承”正是针对这个目标而设计的。

> 在 Java 语言中，继承是通过 `extends` 关键字实现的。

使用继承时，相当于创建了一个新的类，不过这个“克隆”类（正式名称叫作继承类或者子类）中一开始就包含了原始类（正式名称叫作基础类、超类或父类）中的所有成员（`private`会被隐藏起来，禁止访问）与接口。

于此同时，在继承过程中，若**父类**发生了变化，**子类**也会反映出这种变化。

在完成继承后，可向**父类**的对象发送的所有消息亦可原样发给**子类**的对象。如果不对**子类**做任何修改，**子类对象**接收到一条特定的消息后，也总有一个**父类**提供的“方法”能够执行。这意味着**子类**具有与**父类**相同的类型和行为！

然而，在绝大多数情况下，我们希望子类和父类有所区别（不然为什么要建立一个子类呢？），实现这个效果，我们有一下方法可用：

* 为衍生类添加新函数（功能）
* 改变（"改善"）基础类一个现有函数的行为（重载）
为改善一个函数，只需为衍生类的函数建立一个新定义即可。我们的目标是：“尽管使用的函数接口未变，但它的新版本具有不同的表现”。

---

【注】这篇文章，是学习《Thinking in Java》的笔记与摘录整理而成的。

由于找到的这本书太老，加上一些翻译上的问题，所以有些地方的表述可能和现在的主流方式不同（如书中对“重载”、“多态”等词的表述😂）。

这部分主要学习那种思想，就不纠结这些遣词造句是的细节了。